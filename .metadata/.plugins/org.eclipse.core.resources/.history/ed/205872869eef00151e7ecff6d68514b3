package laba2;
import java.text.ParseException;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class all_tweetsParser {
	
	
	    public static all_tweets parser(String str) {
	    	all_tweets tweet = new all_tweets();

	        String findShirota="\\[[0-9]+[0-9]*.[0-9]+[0-9]*\\,";
	        Pattern patternShirota=Pattern.compile(findShirota);
	        Matcher matcherShirota=patternShirota.matcher(str);
	        if (matcherShirota.find()){
	            String result1 = matcherShirota.group().replaceAll(",", "");
	            String result2 = result1.replaceAll("\\[", "");
	            tweet.setShir(Double.parseDouble(result2));
	        }

	        String findDolgota="\\, -?[0-9]+[0-9]*.[0-9]+[0-9]*\\]";
	        Pattern patternDolgota=Pattern.compile(findDolgota);
	        Matcher matcherDolgota=patternDolgota.matcher(str);
	        if (matcherDolgota.find()){
	            String result1 = matcherDolgota.group().replaceAll(",", "");
	            String result2 = result1.replaceAll("\\]", "");
	            tweet.setDolg(Double.parseDouble(result2));
	        }

	        String findDate="[1-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9] [0-9][0-9]:[0-9][0-9]:[0-9][0-9]";
	        Pattern patternDate=Pattern.compile(findDate);
	        Matcher matcherDate=patternDate.matcher(str);
	        if (matcherDate.find()){
	            try {
	                tweet.setDate(matcherDate.group());
	            } catch (ParseException e) {
	                e.printStackTrace();
	            }
	        }

	        String findText="[@#\"A-Za-z](.+)";
	        Pattern patternText=Pattern.compile(findText);
	        Matcher matcherText=patternText.matcher(str);
	        if (matcherText.find()){
	            tweet.setText(matcherText.group());
	        }

	        return tweet;
	    }
	}

